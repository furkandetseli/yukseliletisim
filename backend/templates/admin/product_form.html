{% extends 'admin/base.html' %}

{% block title %}{% if product %}Ürün Düzenle{% else %}Yeni Ürün Ekle{% endif %}{% endblock %}

{% block page_title %}{% if product %}Ürün Düzenle{% else %}Yeni Ürün Ekle{% endif %}{% endblock %}

{% block content %}
<div class="content-section">
    <form method="POST" enctype="multipart/form-data" class="product-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <div class="form-group">
            <label for="name">Ürün Adı</label>
            <input type="text" 
                   id="name" 
                   name="name" 
                   class="form-control" 
                   value="{{ product.name if product else '' }}" 
                   required>
        </div>

        <div class="form-group">
            <label for="category">Kategori</label>
            <select id="category" name="category" class="form-control" required>
                <option value="">Kategori Seçin</option>
                <option value="Telefon Aksesuarı" {% if product and product.category == 'Telefon Aksesuarı' %}selected{% endif %}>Telefon Aksesuarı</option>
                <option value="Bilgisayar & Tablet" {% if product and product.category == 'Bilgisayar & Tablet' %}selected{% endif %}>Bilgisayar & Tablet</option>
                <option value="Powerbank" {% if product and product.category == 'Powerbank' %}selected{% endif %}>Powerbank</option>
                <option value="TV & Görüntü & Ses" {% if product and product.category == 'TV & Görüntü & Ses' %}selected{% endif %}>TV & Görüntü & Ses</option>
            </select>
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="price">Fiyat</label>
                <input type="number" 
                       id="price" 
                       name="price" 
                       class="form-control" 
                       step="0.01" 
                       value="{{ "%.2f"|format(product.price) if product else '' }}" 
                       required>
            </div>
            
            <div class="form-group col-md-6">
                <label for="stock">Stok</label>
                <input type="number" 
                       id="stock" 
                       name="stock" 
                       class="form-control" 
                       value="{{ product.stock if product else '0' }}" 
                       required>
            </div>
        </div>

        <div class="form-group">
            <label for="description">Açıklama</label>
            <textarea id="description" 
                      name="description" 
                      class="form-control" 
                      rows="4">{{ product.description if product else '' }}</textarea>
        </div>

        <div class="form-group">
            <label for="image">Ürün Görseli</label>
            <input type="file" 
                   id="image" 
                   name="image" 
                   class="form-control-file" 
                   accept="image/*"
                   {% if not product %}required{% endif %}>
            
            {% if product and product.image %}
            <div class="current-image mt-2">
                <img src="{{ url_for('static', filename='images/products/' + product.image) }}" 
                     alt="{{ product.name }}" 
                     class="img-thumbnail" 
                     style="max-width: 200px;">
            </div>
            {% endif %}
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                {% if product %}Değişiklikleri Kaydet{% else %}Ürün Ekle{% endif %}
            </button>
            <a href="{{ url_for('admin.products') }}" class="btn btn-secondary">
                <i class="fas fa-times"></i>
                İptal
            </a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_css %}
<style>
.product-form {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
}

.form-control {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.form-control:focus {
    border-color: var(--primary-color);
    outline: none;
}

.form-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}

.form-actions {
    display: flex;
    gap: 10px;
    margin-top: 30px;
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}