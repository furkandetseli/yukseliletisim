<!-- templates/products/category.html -->
{% extends 'base.html' %}

{% block title %}{{ category }} - Yüksel İletişim{% endblock %}

{% block content %}
<div class="container">
    <div class="category-header">
        <h1>{{ category }}</h1>
        
        <div class="sort-options">
            <select onchange="window.location.href='?sort=' + this.value">
                <option value="default" {% if current_sort == 'default' %}selected{% endif %}>Varsayılan Sıralama</option>
                <option value="price_asc" {% if current_sort == 'price_asc' %}selected{% endif %}>Fiyat (Düşükten Yükseğe)</option>
                <option value="price_desc" {% if current_sort == 'price_desc' %}selected{% endif %}>Fiyat (Yüksekten Düşüğe)</option>
                <option value="newest" {% if current_sort == 'newest' %}selected{% endif %}>En Yeniler</option>
            </select>
        </div>
    </div>

    <div class="product-grid">
        {% for product in products.items %}
        <div class="product-card">
            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="product-link">
                <div class="product-image">
                    <img src="{{ url_for('static', filename='images/products/' + product.image) }}"
                         onerror="this.src='/static/images/no-image.png'"
                         alt="{{ product.name }}">
                </div>
                <div class="product-info">
                    <h3>{{ product.name }}</h3>
                    <div class="price">{{ "%.2f"|format(product.price) }} TL</div>
                    {% if product.stock > 0 %}
                    <button class="btn btn-primary add-to-cart-btn" 
                        onclick="event.preventDefault(); addToCart('{{ product.id }}')">
                        Sepete Ekle
                    </button>
                    {% else %}
                    <button class="btn btn-secondary" disabled>Stokta Yok</button>
                    {% endif %}
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    {% if products.pages > 1 %}
    <div class="pagination">
        {% for page_num in range(1, products.pages + 1) %}
        <a href="?page={{ page_num }}&sort={{ current_sort }}" 
           class="page-link {% if page_num == products.page %}active{% endif %}">
            {{ page_num }}
        </a>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}